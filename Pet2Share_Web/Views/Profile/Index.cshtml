@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model Pet2Share_API.Domain.User

<!-- Content Header (Page
                header) -->
<section class="content-header">
    <h1>
        User Profile
    </h1>
    @*<ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li><a href="#">Examples</a></li>
        <li class="active">User profile</li>
    </ol>*@
</section>

<!-- Main content -->
<section class="content">
    @if (ViewData.ModelState["Error"] != null)
    {
        <div class="alert alert-error alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
            @ViewData.ModelState["Error"].Errors.First().ErrorMessage;
        </div>
    }
    @if (ViewBag.Success != null && !string.IsNullOrWhiteSpace(ViewBag.Success))
    {
        <div class="alert alert-success alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
            @ViewBag.Success
        </div>
    }

    <div class="row">
        <div class="col-md-12">
            <!-- Widget: user widget style 1 -->
            <div class="box box-widget widget-user">
                <!-- Add the bg color to the header using any of the bg-* classes -->
                <div class="widget-user-header bg-black" title="Click to upload new Cover pic" data-toggle="modal" data-target=".bs-modal-lg" onclick="LoadUploadModal(@Model.Id,1,1)" style="background: url('@(Pet2Share_Web.BL.FormatText.Instance.GetValidImage( Model.P.CoverPictureURL))') center center;background-size:cover; cursor:pointer;">
                    <h3 class="widget-user-username">@(Model.P.FirstName + " " + Model.P.LastName)</h3>
                    <h5 class="widget-user-desc"></h5>
                </div>
                <div class="widget-user-image">
                    <img class="img-circle" src="@(Pet2Share_Web.BL.FormatText.Instance.GetValidImage(Model.P.ProfilePictureURL, false, Pet2Share_Web.BL.FormatText.CommonThumbnail))" alt="User Avatar">
                </div>
                <div class="box-footer">
                    <div class="row">
                        <div class="col-sm-12">

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 border-right">
                            <div class="description-block">
                                <a class="link-black" href="~/Pets">
                                    <i class="fa fa-paw"></i> Pets
                                </a>

                            </div><!-- /.description-block -->
                        </div><!-- /.col -->
                        <div class="col-sm-4 border-right">
                            <div class="description-block">
                                <a class="link-black" href="~/Connections">
                                    <i class="fa fa-user"></i> Connections
                                </a>
                            </div><!-- /.description-block -->
                        </div><!-- /.col -->
                        <div class="col-sm-4">
                            <div class="description-block">
                                <a class="link-black" href="~/Messages">
                                    <i class="fa fa-comments"></i> Messages
                                </a>
                            </div><!-- /.description-block -->
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div>
            </div><!-- /.widget-user -->
        </div>

    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">About Me</h3>
                    <a href="/profile/edit" class="text-muted pull-right"><i class="fa fa-edit"></i></a>
                </div><!-- /.box-header -->
                <div class="box-body">
                    <strong>  <i class="fa fa-file-text-o margin-r-5"></i>About Me</strong>
                    <p class="text-muted">
                        @Model.P.AboutMe
                    </p>
                    <hr />
                    <strong><i class="fa fa-book margin-r-5"></i>  Education</strong>
                    <p class="text-muted">
                        B.S. in Computer Science from the University of Tennessee at Knoxville
                    </p>

                    <hr>

                    <strong><i class="fa fa-map-marker margin-r-5"></i> Location</strong>
                    <p class="text-muted">
                        @(Model.P.Addr != null ? (string.IsNullOrWhiteSpace(Model.P.Addr.AddressLine1 + Model.P.Addr.AddressLine2 + Model.P.Addr.City + Model.P.Addr.State + Model.P.Addr.Country) ? "Not specified" :
               ((string.IsNullOrWhiteSpace(Model.P.Addr.AddressLine1) ? "" : Model.P.Addr.AddressLine1 + ", ") +
                (string.IsNullOrWhiteSpace(Model.P.Addr.AddressLine2) ? "" : Model.P.Addr.AddressLine2 + ", ") +
                (string.IsNullOrWhiteSpace(Model.P.Addr.City) ? "" : Model.P.Addr.City + ", ") +
                (string.IsNullOrWhiteSpace(Model.P.Addr.State) ? "" : Model.P.Addr.State + ", ") +
                (string.IsNullOrWhiteSpace(Model.P.Addr.Country) ? "" : Model.P.Addr.Country))) : "Not specified")
                    </p>

                    <hr>
                    <div class="row">
                        <div class="col-md-3 text-align-center">
                            <strong><i class="fa fa-mobile margin-r-5"></i> Primary Phone </strong>
                            <p class=" text-muted">@(string.IsNullOrWhiteSpace(Model.P.PrimaryPhone) ? "NA" : Model.P.PrimaryPhone)</p>
                        </div>
                        <div class="col-md-3 text-align-center">
                            <strong><i class="fa fa-mobile margin-r-5"></i> Secondary Phone </strong>
                            <p class=" text-muted">
                                @(string.IsNullOrWhiteSpace(Model.P.SecondaryPhone) ? "NA" : Model.P.SecondaryPhone)
                            </p>
                        </div>
                        <div class="col-md-3 text-align-center">
                            <strong><i class="fa fa-envelope margin-r-5"></i> Email</strong>
                            <p class=" text-muted">
                                @Model.P.Email
                            </p>
                        </div>
                        <div class="col-md-3 text-align-center">
                            <strong><i class="fa fa-envelope margin-r-5"></i> Alternate Email</strong>
                            <p class=" text-muted">
                                @(string.IsNullOrWhiteSpace(Model.P.AlternateEmail) ? "NA" : Model.P.AlternateEmail)
                            </p>
                        </div>
                    </div>

                </div><!-- /.box-body -->
            </div>

        </div>
    </div>


    @*<div class="example-modal">

        </div>*@

</section>
@*<script>
        $(function () {
            $('.sidebar-menu li').removeClass('active');
            $('.menuProfile').addClass('active');

            String.prototype.format = function () {
                var str = this;
                for (var i = 0; i < arguments.length; i++) {
                    var reg = new RegExp("\\{" + i + "\\}", "gm");
                    str = str.replace(reg, arguments[i]);
                }
                return str;
            }
        });
        function LoadUploadModal(ProfileId, User, Cover) {
            //  $('.modal').show();

            var context = $('#tn_select').load('/Upload/UploadImage/{0}/{1}/{2}'.format(ProfileId, User, Cover), function () {
                initSelect(context);
            });
            // e.preventDefault();

        }

        $('#myModal').on('hidden.bs.modal', function (e) {
            // do something...
            $('#tn_select').empty();
            $('div[class^=imgareaselect-]').remove();
        })
    </script>*@
